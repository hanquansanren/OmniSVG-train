# OmniSVG Training Configuration

# ==============================================================================
# Model Configuration
# ==============================================================================
model:
  # Model size: "4B" or "8B"
  # This determines the base model and tokenization settings
  size: "4B"
  
  # Enable Flash Attention 2 for faster training
  use_flash_attn: true
  
  # Torch dtype for model weights
  torch_dtype: "bfloat16"

# ==============================================================================
# Data Configuration  
# ==============================================================================
data:
  # Data directory structure:
  # data_dir/
  #   ├── train_meta.csv
  #   ├── val_meta.csv
  #   ├── svg/
  #   └── png/
  data_dir: "./data"
  
  # Image settings
  target_image_size: 448
  
  # Sequence length settings
  max_seq_length: 2048
  text_max_length: 800
  
  # Text source probabilities
  text_source_probabilities:
    detail_description: 0.60
    brief_description: 0.40

# ==============================================================================
# Training Configuration
# ==============================================================================
training:
  # Learning rate and optimization
  learning_rate: 1.0e-5
  weight_decay: 0.015
  max_grad_norm: 0.8
  
  # Training schedule
  epochs: 150
  gradient_accumulation_steps: 4
  
  # Scheduler
  scheduler:
    type: "cosine"
    warmup_steps: 50000
    num_cycles: 0.5
  
  # Task balance (text-to-SVG vs image-to-SVG)
  task_balance:
    initial_text_only_ratio: 0.50
  
  # Loss weights
  loss_weights:
    text_task: 1.5
    image_task: 1.0

# ==============================================================================
# Logging and Checkpointing
# ==============================================================================
logging:
  log_every: 10
  save_every: 3000
  val_every: 5000

# ==============================================================================
# DataLoader Configuration
# ==============================================================================
dataloader:
  num_workers: 8
  pin_memory: true
  persistent_workers: true
  prefetch_factor: 2

# ==============================================================================
# Random Seed
# ==============================================================================
seed: 2023